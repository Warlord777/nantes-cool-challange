<html>
<head>
<style>

</style>
<title>Nantes Cool Challange</title>
<link rel="stylesheet" href="../css/menustyle.css">
</head>
<body id="body">


<div class="menutab">
<button type="button" onclick="transitionHome()" class="tabbutton">Home</button>
<button type="button" onclick="transitionMap()" class="tabbutton">Map</button>
<button type="button" onclick="transitionDebug ()" class="tabbutton">Debug</button>
</div>



<div class="home_main_paragraph" id="homepage">
    <h1>The Southern African Map</h1>
    <p>This is my cool project. a Detailed map of Southern Africa that one can interact. Click on counties to zoom in and see further information.</p>
    <p>counties on the map are South Africa, Eswatini, Lesotho, Mozambique, Zimbabwe, Botswana and Namibia</p>
</div>

<div class= "mapinfo" id="mapinfo">
    <h1 id="mapHeader">Click on any country on the map.</h1>
    <p id="countryLanguage"></p>
    <p id="countryCapital"></p>
    <p id="countryCurrency"></p>
    <p id="countryPopulation"></p>
    <p id="countryInfromation"></p>

    <button type="button" onclick="backClick()" class="generalbutton " id="mapBackButton">Back</button>

</div>

<div class="mapbox" id="mapbox">
<button type="button" onclick="countryClick(this)" class="sabut mappoint" id="idSA">
</button>
<button type="button" onclick="countryClick(this)" class="namibiabut mappoint" id="idNamibia">
</button>
<button type="button" onclick="countryClick(this)" class="botswanabut mappoint" id="idBotswana">
</button>
<button type="button" onclick="countryClick(this)" class="mozambique mappoint" id="idMozambique">
</button>
<button type="button" onclick="countryClick(this)" class="zimbabwebut mappoint" id="idZimbabwe">
</button>
</div>

<div id="debugBox">
    <p id="debugCountry"></p>
    <p id="debugSelected"></p>
</div>




</body>

<script>

    const globalvariables = {
        mappage: null,
        homepage: null,
        mapBackButton: null,
        mapinfobox: null,
        debugbox: null,
        mapCountrybuttons: [],
        countrySelected: false
    };

    const countryInfo = {
        idSA: {
            name: "South Africa",
            capital: "Pretoria",
            currency: "Rand",
        },
        idNamibia: {
            name: "Namibia",
            capital: "Windhoek",
            currency: "Namibian Dollar"
        },
        idBotswana: {
            name: "Botswana",
            capital: "Gaberone",
            currency: "Pula"
        },
        idMozambique: {
            name: "Mozambique",
            capital: "Maputo",
            currency: "Metical"
        },
        idZimbabwe: {
            name: "Zimbabwe",
            capital: "Harare",
            currency: "Zimbabwean Dollar"
        }
    };

    document.addEventListener('DOMContentLoaded', () => {

        globalvariables.homepage = document.getElementById('homepage');
        globalvariables.mappage = document.getElementById('mapbox');
        globalvariables.mapinfobox = document.getElementById('mapinfo');
        globalvariables.mapBackButton = document.getElementById('mapBackButton');
        globalvariables.mapCountrybuttons = Array.from(document.querySelectorAll(".mappoint"));
        globalvariables.debugbox = document.getElementById('debugBox')
        document.getElementById('debugCountry').textContent = "debug";

        globalvariables.mappage.classList.add('hidden');
        globalvariables.mapinfobox.classList.add('hidden');
        globalvariables.debugbox.classList.add("hidden");


    })


    const body = document.getElementById('body')
    
    function transitionMap () {
        globalvariables.mapBackButton.classList.add('hidden');
        globalvariables.mappage.classList.remove('hidden');
        globalvariables.mapinfobox.classList.remove('hidden');
        globalvariables.homepage.classList.add('hidden');
        globalvariables.debugbox.classList.add("hidden")
    }

    function transitionHome () {
        globalvariables.mappage.classList.add('hidden');
        globalvariables.mapinfobox.classList.add('hidden');
        globalvariables.homepage.classList.remove('hidden');
        globalvariables.debugbox.classList.add("hidden");
        if (globalvariables.countrySelected) {
            backClick ();
        }
    }

    function transitionDebug () {
        globalvariables.mapBackButton.classList.add('hidden');
        globalvariables.mappage.classList.add('hidden');
        globalvariables.homepage.classList.add('hidden');
        globalvariables.mapinfobox.classList.add('hidden');
        globalvariables.debugbox.classList.remove('hidden');
        if (globalvariables.countrySelected) {
            backClick ();
        }
    }

    /* Map Interaction */

    function countryClick(element) {
        const selectedId = element.id;
        const info = countryInfo[selectedId];
        document.getElementById('debugCountry').textContent = "country selected: " + info.name;
        

        globalvariables.mapCountrybuttons.forEach(country => {
            country.classList.toggle("hidden", country.id !== selectedId)
        });

        document.getElementById("mapHeader").textContent = info.name;
        document.getElementById("countryCapital").textContent = "Capital: " + info.capital;
        document.getElementById("countryCurrency").textContent = "Currency: " +info.currency;
        globalvariables.countrySelected = true;

        globalvariables.mapBackButton.classList.remove ('hidden');

    }

    function backClick () {
        const countries = ["idSA", "idNamibia", "idBotswana", "idMozambique", "idZimbabwe"];
         countries.forEach(country => {
                const countryElement = document.getElementById (country);
                countryElement.classList.remove ('hidden');

                const countryNameDisplay = document.getElementById("mapHeader");
                const countryCurrencyDisplay = document.getElementById("countryCurrency");
                countryNameDisplay.textContent = "Click on any country on the map.";
                countryCurrencyDisplay.textContent = "";
                document.getElementById("countryCapital").textContent = "";
                document.getElementById("countryCurrency").textContent = "";

                const mapbackButton = document.getElementById('mapBackButton');
                mapbackButton.classList.add('hidden');
        });
    }
</script>
</html>